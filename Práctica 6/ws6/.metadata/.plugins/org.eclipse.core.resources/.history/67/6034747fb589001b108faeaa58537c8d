package uo.mp.s6.greenhouse.humidity;

import java.util.ArrayList;
import java.util.List;


public class HumidityController {
	public static final double MAX_HUMIDITY=70, MIN_HUMIDITY=20;
	
	private List<HumiditySensor> sensors = new ArrayList<>();
	
	private IrrigationSystem irrigationSystem;
	
	public void add(HumiditySensor sensor) {
		this.sensors.add(sensor);
	}
	
	public void monitor() {
		if (MAX_HUMIDITY>= getAverageHumidity() && MIN_HUMIDITY<=getAverageHumidity()) {
			doNothing();			
		} else if (MAX_HUMIDITY*0.2<getAverageHumidity()) {
			adjustToMin();
		} else if (MIN_HUMIDITY*0.2>getAverageHumidity()) {
			adjustToMax();
		} else if (MAX_HUMIDITY<getAverageHumidity()){
			decreaseState();
		} else if (MIN_HUMIDITY>getAverageHumidity()) {
			increaseState();
		}
	}
	
	private void adjustToMin(){
		
	}
	
	private void adjustToMax() {
		
	}
	
	private void decreaseState() {
		
	}
	
	private void increaseState() {
		
	}
	
	private void doNothing() {
		System.out.println("La humedad " + getAverageHumidity() + " es normal");		
	}

	private double getAverageHumidity() {
		double addition = 0;
		for(HumiditySensor sensor : sensors) {
			addition += sensor.getHumidity();
		}
		return addition / sensors.size();
	}
}
